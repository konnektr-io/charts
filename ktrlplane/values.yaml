namespace: ktrlplane
backend:
  image:
    repository: ghcr.io/konnektr-io/ktrlplane-backend
    tag: ""  # Empty means use Chart.AppVersion
    pullPolicy: Always
  replicas: 1
  runMigrations: true  # Run database migrations before starting backend
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  auth:
    issuer: https://auth.konnektr.io/
    audience: https://api.ktrlplane.konnektr.io
  probe:
    liveness:
      initialDelaySeconds: 30
      periodSeconds: 10
    readiness:
      initialDelaySeconds: 5
      periodSeconds: 5
  # Optional Kubernetes scheduling fields
  tolerations: [] # Example: [{ key: "key1", operator: "Equal", value: "value1", effect: "NoSchedule" }]
  affinity: {}    # Example: { nodeAffinity: { requiredDuringSchedulingIgnoredDuringExecution: { nodeSelectorTerms: [...] } } }
  nodeSelector: {} # Example: { disktype: "ssd" }
frontend:
  image:
    repository: ghcr.io/konnektr-io/ktrlplane-frontend
    tag: ""  # Empty means use Chart.AppVersion
    pullPolicy: Always
  replicas: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"
  probe:
    liveness:
      initialDelaySeconds: 30
      periodSeconds: 10
    readiness:
      initialDelaySeconds: 5
      periodSeconds: 5
  # Optional Kubernetes scheduling fields
  tolerations: [] # Example: [{ key: "key1", operator: "Equal", value: "value1", effect: "NoSchedule" }]
  affinity: {}    # Example: { nodeAffinity: { requiredDuringSchedulingIgnoredDuringExecution: { nodeSelectorTerms: [...] } } }
  nodeSelector: {} # Example: { disktype: "ssd" }
database:
  enabled: true # Set to false to use external database (e.g., cnpg)
  useExternalSecret: false # If true, reference an existing secret for DB credentials
  externalSecretName: "" # Name of the external secret (required if useExternalSecret is true)
  # Allows overriding the key names used in the referenced secret (useful for CNPG, etc.)
  secretKeys:
    host: DB_HOST
    port: DB_PORT
    db: DB_NAME
    user: DB_USER
    password: DB_PASSWORD
  credentials:
    db: ktrlplane
    user: ktrlplane
    password: "ktrlplane"
  image:
    repository: postgres
    tag: 16-alpine # Use newer version
  storage: 10Gi
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"
ingress:
  enabled: false
  className: nginx
  annotations: {}
  hosts:
    - ktrlplane.local
  tls: []
  #  - secretName: ktrlplane-tls
  #    hosts:
  #      - ktrlplane.local
stripe:
  enabled: false # Enable Stripe integration
  useExternalSecret: true # If true, reference an existing secret for Stripe credentials
  externalSecretName: "ktrlplane-stripe-secret" # Name of the external secret (required if useExternalSecret is true)
  # Allows overriding the key names used in the referenced Stripe secret
  secretKeys:
    secretKey: STRIPE_SECRET_KEY
    publishableKey: STRIPE_PUBLISHABLE_KEY
    webhookSecret: STRIPE_WEBHOOK_SECRET

  # Only set these if useExternalSecret is false (NOT RECOMMENDED for production)
  secretKey: ""
  publishableKey: ""
  webhookSecret: ""
  # Product configuration (safe to store in values)
  products:
    - resource_type: "Konnektr.DigitalTwins"
      sku: "free"
      product_id: "prod_T01txFyd6dfzao"
    - resource_type: "Konnektr.DigitalTwins"
      sku: "standard"
      product_id: "prod_SzztLZsKSYqiVz"
    - resource_type: "Konnektr.Flows"
      sku: "free"
      product_id: "prod_T0n3Z04EIgDZcT"
    - resource_type: "Konnektr.Flows"
      sku: "standard"
      product_id: "prod_T01up7wLDULGB1"
db-query-operator:
  enabled: false